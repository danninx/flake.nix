{ config, lib, pkgs, ... }:

with lib; let
  cfg = config.dnix.pentesting-tools;
in
  {
    options = {
      dnix.pentesting-tools.enable = mkEnableOption "[WIP] small suite of textbook exploitation tools";  
    };

    config = mkIf cfg.enable {
      warnings = [ 
        "With use of pentesting-tools, it's recommended to use some sort of multiplexer. For a simpler multiplexer configuration, use `dnix.tmux.enable = true`" 
      ];

      programs.wireshark.enable = true;
      programs.wireshark.dumpcap.enable = true;

      environment.systemPackages = with pkgs; [
        aircrack-ng
        exploitdb
        ffuf
        hashcat
        masscan
        metasploit
        mimikatz
        netcat
        nmap
        responder
        searchsploit
        seclists
        sqlmap
      ];
    };
  }
